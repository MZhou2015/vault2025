import{d as D,u as N,r as n,f as T,g as $,c as i,o as u,a,b as U,i as h,h as f,w,j as B,F as C,k as S,t as y,v as M,n as F,e as L,_ as O}from"./index-DuEUCvy9.js";const j={class:"folio"},z={class:"acc"},E=["value"],J={class:"tabs"},q=["onClick"],A={key:0,class:"msg"},G={style:{color:"#2288ce","font-weight":"600"}},H=D({__name:"portCrypto",setup(K){const _=N(),c=n("2025-07-22"),x=n(["holding","transactions","pnl","overview"]),m=n("holding"),p=n([]),b=n("数字货币投资组合"),g=n(80610),d=n([]),r=n("");T(async()=>{const o=new Date;c.value=o.toISOString().split("T")[0];const e=JSON.parse(localStorage.getItem("vault2accountlist")||"[]");p.value=e.filter(t=>t.currency==="USDC");const l=localStorage.getItem("baseDate")||"2025-07-01";_.basesetting.date1=l,await v()});async function I(o){m.value=o,console.log("切换到标签:",o),await v(o)}async function v(o="holding"){d.value=[];const e=o,l=g.value,t=p.value.find(V=>V.acc_no===l)||{acc_no:0,name:"未知账户"};b.value=`数字货币投资组合 - ${t.acc_no} ${t.name}`;const k=_.basesetting.date1||"2025-07-01",s=await $("/vault/getportfolio",{tab:e,aId:l,date:c.value,date1:k,param:"trade"});s.message&&s.message=="ok200"&&(d.value=s.data,r.value=""),s.code==2&&(d.value=s.data,r.value=s.message),s.code==3&&(r.value=s.message),console.log(s)}return(o,e)=>{const l=L("datatable");return u(),i("div",j,[e[9]||(e[9]=a("h3",null,"数字货币投资组合",-1)),a("div",null,[a("div",z,[e[4]||(e[4]=a("label",{style:{"min-width":"60px"}},"账户：",-1)),e[5]||(e[5]=f("     ")),w(a("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t),onChange:e[1]||(e[1]=t=>v("holding"))},[(u(!0),i(C,null,S(p.value,t=>(u(),i("option",{key:t.acc_no,value:t.acc_no},y(t.name),9,E))),128))],544),[[B,g.value]]),e[6]||(e[6]=f("         ")),e[7]||(e[7]=a("label",{class:"me-2 fw-medium text-muted small",style:{"min-width":"60px"}},"日期：",-1)),w(a("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t)},null,512),[[M,c.value]])]),a("ul",J,[(u(!0),i(C,null,S(x.value,t=>(u(),i("li",{key:t,class:F(["tab-item",{active:m.value===t}]),onClick:k=>I(t)},y(t),11,q))),128))]),U(l,{data:d.value,caption:b.value,style:1},null,8,["data","caption"]),m.value=="holding"?(u(),i("div",A,[a("span",G,y(r.value),1),e[8]||(e[8]=f("        ")),a("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=t=>v("takesnapshot"))},"take snapshot")])):h("",!0)])])}}}),Q=O(H,[["__scopeId","data-v-ece4c14c"]]);export{Q as default};
