import{d as T,u as $,r as n,f as D,c as l,o as i,a,i as w,h as m,b as U,w as b,j as h,F as C,k as x,t as p,v as B,n as M,e as F,g as L,_ as O}from"./index-DuEUCvy9.js";const j={class:"folio"},z={class:"acc"},E=["value"],J={class:"tabs"},q=["onClick"],A={key:0,class:"msg"},G={style:{color:"#2288ce","font-weight":"600"}},H={key:0,style:{color:"#9966cc","font-weight":"550"}},K=T({__name:"portfolio",setup(P){const S=$(),c=n("2025-07-22"),g=n([]),V=n(["holding","transactions","pnl","overview"]),d=n("holding"),_=n("数字货币投资组合"),v=n([]),r=n(""),f=n(80168);D(async()=>{const s=new Date;c.value=s.toISOString().split("T")[0];const e=JSON.parse(localStorage.getItem("vault2accountlist")||"[]");g.value=e.filter(u=>u.currency!="USDC")});async function I(s){d.value=s,await y(s)}async function y(s="holding"){v.value=[];const e=s;d.value=s;const u=f.value,t=g.value.find(N=>N.acc_no===u)||{acc_no:0,name:"未知账户"};_.value=`数字货币投资组合 - ${t.acc_no} ${t.name}`;const k=S.basesetting.date1||"2025-07-01",o=await L("/vault/getportfolio",{tab:e,aId:u,date:c.value,date1:k,param:"trade"});o.message&&o.message=="ok200"&&(v.value=o.data,r.value=""),o.code==2&&(v.value=o.data,r.value=o.message),o.code==3&&(r.value=o.message),console.log(o)}return(s,e)=>{const u=F("datatable");return i(),l("div",j,[e[9]||(e[9]=a("h3",null,"投资组合",-1)),a("div",null,[a("div",z,[e[4]||(e[4]=a("label",{style:{"min-width":"60px"}},"账户：",-1)),e[5]||(e[5]=m("     ")),b(a("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),onChange:e[1]||(e[1]=t=>y("holding"))},[(i(!0),l(C,null,x(g.value,t=>(i(),l("option",{key:t.acc_no,value:t.acc_no},p(t.name),9,E))),128))],544),[[h,f.value]]),e[6]||(e[6]=m("         ")),e[7]||(e[7]=a("label",{class:"me-2 fw-medium text-muted small",style:{"min-width":"60px"}},"日期：",-1)),b(a("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t)},null,512),[[B,c.value]])]),a("ul",J,[(i(!0),l(C,null,x(V.value,t=>(i(),l("li",{key:t,class:M(["tab-item",{active:d.value===t}]),onClick:k=>I(t)},p(t),11,q))),128))]),U(u,{data:v.value,caption:_.value,style:1},null,8,["data","caption"]),d.value=="holding"?(i(),l("div",A,[a("span",G,p(r.value),1),e[8]||(e[8]=m("        ")),a("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=t=>y("takesnapshot"))},"take snapshot")])):w("",!0)]),d.value=="overview"?(i(),l("span",H,p(r.value),1)):w("",!0),e[10]||(e[10]=m("        "))])}}}),R=O(K,[["__scopeId","data-v-40a13ad4"]]);export{R as default};
